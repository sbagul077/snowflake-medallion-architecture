create or replace database CCDA_FINAL_ASSIGNMENT;

create or replace schema CCDA_FINAL_ASSIGNMENT.CCDA;

create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_ALLERGIES (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	SUBSTANCE_DESC VARCHAR(16777216),
	SUBSTANCE_CODE_SYSTEM VARCHAR(16777216),
	SUBSTANCE_CODE VARCHAR(16777216),
	REACTION_DESC VARCHAR(16777216),
	REACTION_CODE_SYSTEM VARCHAR(16777216),
	REACTION_CODE VARCHAR(16777216),
	SEVERITY VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_BRONZE (
	FILE_NAME VARCHAR(16777216),
	DOC VARIANT,
	LOAD_TS TIMESTAMP_NTZ(9) DEFAULT CURRENT_TIMESTAMP()
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_ENCOUNTERS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_FUNCTIONAL_STATUS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	VALUE VARCHAR(16777216),
	UNIT VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_IMMUNIZATIONS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_INGEST_MANIFEST (
	FILE_NAME VARCHAR(16777216),
	STATUS VARCHAR(16777216),
	REASON VARCHAR(16777216),
	COUNT_MEDICATIONS NUMBER(38,0),
	COUNT_VITALS NUMBER(38,0),
	COUNT_RESULTS NUMBER(38,0),
	COUNT_PROBLEMS NUMBER(38,0),
	COUNT_PROCEDURES NUMBER(38,0),
	COUNT_ENCOUNTERS NUMBER(38,0),
	COUNT_IMMUNIZATIONS NUMBER(38,0),
	COUNT_FUNCTIONAL_STATUS NUMBER(38,0),
	COUNT_ALLERGIES NUMBER(38,0),
	COUNT_PLAN_OF_CARE NUMBER(38,0),
	COUNT_SOCIAL_HISTORY NUMBER(38,0),
	PROCESSED_AT TIMESTAMP_NTZ(9) DEFAULT CURRENT_TIMESTAMP(),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_MEDICATIONS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_PLAN_OF_CARE (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_PROBLEMS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_PROCEDURES (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_RESULTS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	VALUE VARCHAR(16777216),
	UNIT VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_SOCIAL_HISTORY (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	STOP_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	STOP_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	VALUE VARCHAR(16777216),
	UNIT VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
create or replace TABLE CCDA_FINAL_ASSIGNMENT.CCDA.CCDA_VITALS (
	FILE_NAME VARCHAR(16777216),
	START_RAW VARCHAR(16777216),
	START_ISO TIMESTAMP_NTZ(9),
	DESCRIPTION VARCHAR(16777216),
	CODE_SYSTEM VARCHAR(16777216),
	CODE VARCHAR(16777216),
	VALUE VARCHAR(16777216),
	UNIT VARCHAR(16777216),
	PATIENT_ID VARCHAR(16777216),
	DOCUMENT_ID VARCHAR(16777216),
	PATIENT_IDS_ALL VARIANT,
	SOURCE_SYSTEM VARCHAR(16777216),
	RECORD_TYPE VARCHAR(16777216)
);
CREATE OR REPLACE FILE FORMAT CCDA_FINAL_ASSIGNMENT.CCDA.FF_XML
	TYPE = XML
	DISABLE_AUTO_CONVERT = TRUE
;
create or replace schema CCDA_FINAL_ASSIGNMENT.PUBLIC;
